<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link href="../static/css/bootstrap.min.css" rel="stylesheet">
    <link href="../static/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,400,600"
          rel="stylesheet">
    <link href="../static/css/font-awesome.css" rel="stylesheet">
    <link href="../static/css/style.css" rel="stylesheet">
    <link href="../static/css/pages/dashboard.css" rel="stylesheet">
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body id="body">
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container"> <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span
                class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span> </a><a class="brand" href="templates_origin/index2.html">Huella Gestión</a>
            <div class="nav-collapse">
                <ul class="nav pull-right">
                    <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown"><i
                            class="icon-cog"></i> Cuenta <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="">Perfil</a></li>
                            <li><a href="index.html">Cerrar Sesión</a></li>
                        </ul>
                    </li>
                </ul>
                <form class="navbar-search pull-right">
                    <input type="text" class="search-query" placeholder="Search">
                </form>
            </div>
            <!--/.nav-collapse -->
        </div>
        <!-- /container -->
    </div>
    <!-- /navbar-inner -->
</div>
<!-- /navbar -->
<div class="subnavbar">
    <div class="subnavbar-inner">
        <div class="container">
            <ul class="mainnav">
                <li><a href="empleado.html"><i class="icon-dashboard"></i><span>Inicio</span> </a> </li>
                <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown"> <i class="icon-folder-open"></i><span>Documentos</span> <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="documentos.html">Ver Documentos</a></li>
                        <li><a href="documentos.html">Crear Documento</a></li>
                    </ul>
                </li>
                <li class="active"><a href="tareas.html"><i class="icon-calendar"></i><span>Tareas</span> </a></li>
                <li class="dropdown"><a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown"> <i class="icon-user"></i><span>Mi Cuenta</span> <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="perfil.html">Perfil</a></li>
                        <li><a href="">Cambiar Contraseña</a></li>
                        <li><a href="index.html">Cerrar Sesión</a></li>
                    </ul>
                </li>
                <li><a href="templates_origin/guidely.html"><i class="icon-facetime-video"></i><span>Tour</span> </a></li>
            </ul>

        </div>

        <!-- /container -->

    </div>

    <ol class="breadcrumb " >
        <div class="breadcrumb-title">
            <li><a href="#"><i class=" icon-caret-right"></i> Inicio</a> / </li>

            <li class="active">Tareas</li>
        </div>
    </ol>
    <!-- /subnavbar-inner -->
</div>
<!-- /subnavbar -->

<div class="main">



    <!-- List Bussiness -->

    <div class="main-inner">

        <div class="container">

            <div class="row" >


                <div class="span3  procesos">
                    <ul class="nav nav-tabs nav-stacked ">
                        <li class="title-nav"><i class="icon-retweet" style="font-size: 18px"></i><h3 style="font-size: 16px;  font-weight: 800; padding-left: 5px;display: inline-block">VER</h3></li>
                        <li><a class="ver_tareas_lista" href="#"> Lista</a></li>
                        <li><a class="ver_tareas_calendario" href="#"> Calendario</a></li>

                    </ul>
                </div>


                <div class="span9">

                    <div id="contenido" style="border: 1px solid #d9d9d9; background-color:#fff; min-height: 200px">
                        hgfgfg
                    </div>
                </div>



            </div>
            <!-- /row -->
        </div>
        <!-- /container -->
    </div>
    <!-- /main-inner -->
</div>
<!-- /main -->
<div class="extra">
    <div class="extra-inner">
        <div class="container">
            <div class="row">
                <div class="span3">
                    <h4>
                        About Free Admin Template</h4>
                    <ul>
                        <li><a href="javascript:;">Huella Logistica</a></li>
                        <li><a href="javascript:;">Recursos</a></li>
                        <li><a href="javascript:;">Nosotros</a></li>
                        <li><a href="javascript:;">Gestion</a></li>
                    </ul>
                </div>
                <!-- /span3 -->
                <div class="span3">
                    <h4>
                        Support</h4>
                    <ul>
                        <li><a href="javascript:;">Frequently Asked Questions</a></li>
                        <li><a href="javascript:;">Ask a Question</a></li>
                        <li><a href="javascript:;">Video Tutorial</a></li>
                        <li><a href="javascript:;">Feedback</a></li>
                    </ul>
                </div>
                <!-- /span3 -->
                <div class="span3">
                    <h4>
                        Something Legal</h4>
                    <ul>
                        <li><a href="javascript:;">Read License</a></li>
                        <li><a href="javascript:;">Terms of Use</a></li>
                        <li><a href="javascript:;">Privacy Policy</a></li>
                    </ul>
                </div>
                <!-- /span3 -->
                <div class="span3">
                    <h4>
                        Open Source jQuery Plugins</h4>
                    <ul>
                        <li><a href="http://www.egrappler.com">Open Source jQuery Plugins</a></li>
                        <li><a href="http://www.egrappler.com;">HTML5 Responsive Tempaltes</a></li>
                        <li><a href="http://www.egrappler.com;">Free Contact Form Plugin</a></li>
                        <li><a href="http://www.egrappler.com;">Flat UI PSD</a></li>
                    </ul>
                </div>
                <!-- /span3 -->
            </div>
            <!-- /row -->
        </div>
        <!-- /container -->
    </div>
    <!-- /extra-inner -->
</div>

<!-- /extra -->
<div class="footer">
    <div class="footer-inner">
        <div class="container">
            <div class="row">
                <div class="span12"> &copy; 2013 <a href="http://www.egrappler.com/">Bootstrap Responsive Admin Template</a>. </div>
                <!-- /span12 -->
            </div>
            <!-- /row -->
        </div>
        <!-- /container -->
    </div>
    <!-- /footer-inner -->
</div>
<!-- /footer -->

<!-- backbone templates -->
<script type="text/template" id="tareas-lista">

    <div class="widget widget-table action-table" >
        <div class="widget-header"> <i class="icon-th-list"></i>
            <h3>Tareas</h3>
        </div>
        <!-- /widget-header -->
        <div class="widget-content" >
            <table class="table table-striped table-bordered" >
                <thead>
                <tr>
                    <th> Nombre </th>
                    <th> Descripción</th>
                    <th > Fecha Fin </th>
                    <th class="td-actions"> </th>
                </tr>
                </thead>
                <tbody>
                <tr id="ling">
                    <td> Nombre de la Tarea</td>
                    <td> Descripción de la tarea</td>
                    <td> 12/07/2015 </td>
                    <td class="td-actions"><a href="javascript:;" class="btn btn-small btn-success btn-completa-tarea"><i class="btn-icon-only icon-ok "> </i></td>
                </tr>
                <tr id="ling">
                    <td> Nombre de la Tarea</td>
                    <td> Descripción de la tarea</td>
                    <td> 12/07/2015 </td>
                    <td class="td-actions"><a href="javascript:;" class="btn btn-small btn-success btn-completa-tarea"><i class="btn-icon-only icon-ok "> </i></td>
                </tr>
                <tr id="ling">
                    <td> Nombre de la Tarea</td>
                    <td> Descripción de la tarea</td>
                    <td> 12/07/2015 </td>
                    <td class="td-actions"><a href="javascript:;" class="btn btn-small btn-success btn-completa-tarea"><i class="btn-icon-only icon-ok "> </i></td>
                </tr>
                <tr id="ling">
                    <td> Nombre de la Tarea</td>
                    <td> Descripción de la tarea</td>
                    <td> 12/07/2015 </td>
                    <td class="td-actions"><a href="javascript:;" class="btn btn-small btn-success btn-completa-tarea"><i class="btn-icon-only icon-ok "> </i></td>
                </tr>
                <tr id="ling">
                    <td> Nombre de la Tarea</td>
                    <td> Descripción de la tarea</td>
                    <td> 12/07/2015 </td>
                    <td class="td-actions"><a href="javascript:;" class="btn btn-small btn-success btn-completa-tarea"><i class="btn-icon-only icon-ok "> </i></td>
                </tr>

                </tbody>
            </table>
        </div>
        <!-- /widget-content -->
    </div>

</script>

<script type="text/template" id="tareas-calendar">
    <div class="widget widget-nopad">
        <div class="widget-header"> <i class="icon-list-alt"></i>
            <h3> Tareas</h3>
        </div>
    <div class="widget-content">
        <div id='calendar'>
        </div>
    </div>
    <!-- /widget-content -->
    </div>
</script>

<!-- /backbone templates -->

<!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="../static/js/jquery-1.7.2.min.js"></script>
<script src="../static/js/underscore.js"></script>
<script src="../static/js/backbone-min.js"></script>
<script src="../static/js/excanvas.min.js"></script>
<script src="../static/js/chart.min.js" type="text/javascript"></script>

<script src="../static/js/bootstrap.js"></script>

<script language="javascript" type="text/javascript" src="../static/js/full-calendar/fullcalendar.min.js"></script>

<script src="../static/js/base.js"></script>

<script>
    $( document ).ready(function() {
        console.log('imprime');



        var EmpresaModel = Backbone.Model.extend({
            defaults: {
                nombre:'',
                nit: "",
                direccion: "",
                telefono1: "",
                telefono2: '',
                descripcion:'',
                sitio_web:'',
                activo: ""
            }
        });
        var empresas = Backbone.Collection.extend({
            model:EmpresaModel
        });


        var TareaModel = Backbone.Model.extend({
            defaults: {
                nombre:'',
                nit: "",
                direccion: "",
                telefono1: "",
                telefono2: '',
                descripcion:'',
                sitio_web:'',
                activo: ""
            }
        });
        var Tareas = Backbone.Collection.extend({
            model:TareaModel
        });

        var EmpresaView = Backbone.View.extend({
            el: $('body'),
            container: $('#contenido'),
            empresa_model: new EmpresaModel(),
            tarea_model: new TareaModel(),
            tareas_calendar_template:_.template($('#tareas-calendar').html()),
            tareas_list_template:_.template($('#tareas-lista').html()),


            events: {
                "click .ver_tareas_lista": "verTareasLista",
                "click .ver_tareas_calendario": "verTareasCalendar",
                "click .btn-elimina-item": "eliminaItem",
                "click .btn-completa-tarea": "completaTarea",
                "click .ver_tarea": "prueba"



            },

            initialize: function () {
//                this.container.html('');
//                this.container.append(this.empleados_template(this.empresa_model.toJSON()));
//                return this;
            },

            render: function(){

                this.container.html('');
                this.verTareasCalendar();

                return this;
            },
            prueba: function (ev) {
                ev.preventDefault();
                console.log('ver tarea clase fue oprimido' + $(ev.target).parent().attr('id'))
                if($(ev.target).attr('id')){
                    console.log('id')
                }

            },
            verTareasLista: function (ev) {
                ev.preventDefault();
                var self =this
                this.container.html('');
                this.container.append(this.tareas_list_template);
                this.ifSmallDevice(this.container);

                return this;
            },
            verTareasCalendar: function () {

                this.container.html('');
                this.container.append(this.tareas_calendar_template);
                var date = new Date();
                var d = date.getDate();
                var m = date.getMonth();
                var y = date.getFullYear();
                var calendar = $('#calendar').fullCalendar({
                    header: {
                        left: 'prev,next today',
                        center: 'title',
                        right: 'month,agendaWeek,agendaDay'
                    },
                    selectable: true,
                    selectHelper: false,
                    eventClick: function(calEvent, jsEvent, view) {
                        var modal=$('#completaTarea');
                        if(calEvent.description!=undefined){
                            modal.find('#nombre_tarea').html('<hr>Tarea: '+calEvent.title+'<hr>');

                            modal.find('#descripcion_tarea').html('Descripción: '+calEvent.description+'<hr>');
                            modal.find('#fecha_fin_tarea').html('Finaliza: '+calEvent.end+'<hr>');
                        }else{
                            modal.find('#nombre_tarea').html('<hr>Tarea: '+calEvent.title+'<hr>');
                            modal.find('#fecha_fin_tarea').html('Finaliza: '+calEvent.end+'<hr>');
                        }
                        modal.modal('show');
                        //alert('Event: ' + calEvent.id);
                        // change the border color just for fun
                        $(this).css('border-color', 'red');

                    },
                    select: function () {

                        //$('#completaTarea').modal('show');

                    },
                    editable: false,
                    events: [
                        {
                            title: 'Tarea 1',
                            start: new Date(y, m, d+1),
                            end: new Date(y, m, d+2),
                            description: 'descripcion'
                        },
                        {
                            title: 'Tarea 2',
                            start: new Date(y, m, d+3),
                            end: new Date(y, m, d+4),
                            description: 'descripcion'
                        },
                        {
                            title: 'Tarea 3',
                            start: new Date(y, m, d+5),
                            end: new Date(y, m, d+7),
                            description: 'descripcion'
                        },
                        {
                            id:'1',
                            title: 'Tarea 4',
                            description:"Su descripcion descripcion",
                            start: new Date(y, m, 20),
                            end: new Date(y, m, 21),
                            className: 'ver_tarea'
                        },
                        {
                            id:'1',
                            title: 'Tarea 5',
                            description:"Su descripcion descripcion",
                            start: new Date(y, m, 28),
                            end: new Date(y, m, 29),
                            className: 'ver_tarea'
                        }
                    ]
                });
                this.ifSmallDevice(this.container);
                return this;
            },
            verPerfiles: function (ev) {
                ev.preventDefault();
                this.container.html('');
                this.container.append(this.perfiles_template());
                this.ifSmallDevice(this.container);
                return this;
            },
            verTareas: function (ev) {
                ev.preventDefault();
                this.container.html('');
                this.container.append(this.tareas_template());
                this.ifSmallDevice(this.container);
                return this;
            },
            ifSmallDevice: function (container) {
                if($(window).width()<=768)
                    $("html, body").animate({ scrollTop: container.offset().top -15}, 1000);

            },
            completaTarea: function (ev) {
                ev.preventDefault();
                $('#completaTarea').find('#nombre_tarea').html('');
                $('#completaTarea').find('#descripcion_tarea').html('');
                $('#completaTarea').find('#fecha_fin_tarea').html('');
                $('#completaTarea').find('#nombre_tarea').html('<hr>Tarea: Nombre de la Tarea<hr>');
                $('#completaTarea').find('#descripcion_tarea').html('Descripcion: Aqui va la Descripcion<hr>');
                $('#completaTarea').modal('show');
            },
            eliminaItem: function (ev) {
                ev.preventDefault();
                var element=$(ev.target);

                if(element.hasClass('elimina-empleado')){
                    $('#eliminaEmpleado').modal('show');
                    console.log('empleado'+element.parent().parent().attr('id'))
                }else if(  element.parent().hasClass('elimina-empleado')){
                    $('#eliminaEmpleado').modal('show');
                    console.log('empleado'+element.parent().parent().parent().attr('id'))
                }
                if(element.hasClass('elimina-proceso')){
                    $('#eliminaProceso').modal('show');
                    console.log('proceso'+element.parent().parent().attr('id'))
                }else if(  element.parent().hasClass('elimina-proceso')){
                    $('#eliminaProceso').modal('show');
                    console.log('proceso'+element.parent().parent().parent().attr('id'))
                }

                if(element.hasClass('elimina-perfil')){
                    $('#eliminaPerfil').modal('show');
                    console.log('perfil'+element.parent().parent().attr('id'))
                }else if(  element.parent().hasClass('elimina-perfil')){
                    $('#eliminaPerfil').modal('show');
                    console.log('perfil'+element.parent().parent().parent().attr('id'))
                }

                if(element.hasClass('elimina-tarea')){
                    $('#eliminaTarea').modal('show');
                    console.log('tarea'+element.parent().parent().attr('id'))
                }else if(  element.parent().hasClass('elimina-tarea')){
                    $('#eliminaTarea').modal('show');
                    console.log('tarea'+element.parent().parent().parent().attr('id'))
                }
            },


        });

        var view = new EmpresaView();
        view.render();


    });


</script>

<!-- Modal Completa Tarea-->
<div class="modal fade" id="completaTarea" tabindex="-2" role="dialog" aria-labelledby="myModalLabel" >
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Completar Tarea</h4>
            </div>
            <div class="modal-body">
                ¿Está seguro de que desea marcar esta tarea como terminada?<br>
                <div id="nombre_tarea"></div>
                <div id="descripcion_tarea"></div>
                <div id="fecha_fin_tarea"></div>
                Presione Aceptar para continuar o Cancelar.

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary">Aceptar</button>
            </div>
        </div>
    </div>
</div>
<!---------- Finish Modal--------------->
<!-- Modal Elimina Tarea-->
<div class="modal fade" id="verTarea" tabindex="-2" role="dialog" aria-labelledby="myModalLabel" >
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Tarea</h4>
            </div>
            <div class="modal-body">
                <div class="span3" >
                    <div style="border:solid #d9d9d9 1px; width: 0 auto; margin:auto; padding: 10px; text-align: center" ><img style="width: 90%" src="../static/img/default-user.png"></div>
                </div>
                <div class="span 7">
                    <form class="form-horizontal">
                        <fieldset>
                            <div class="control-group">
                                <label class="control-label" for="firstname">Nombre</label>
                                <div class="controls">
                                    Nombre Tarea
                                </div> <!-- /controls -->
                            </div> <!-- /control-group -->

                            <div class="control-group">
                                <label class="control-label" for="firstname">Dirección:</label>
                                <div class="controls">
                                    Descripcion de la tarea.
                                </div> <!-- /controls -->
                            </div> <!-- /control-group -->
                            <div class="control-group">
                                <label class="control-label" for="firstname">Fecha de Entrega</label>
                                <div class="controls">
                                    12/07/2015
                                </div> <!-- /controls -->
                            </div> <!-- /control-group -->

                        </fieldset>
                    </form>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Salir</button>
                <button type="button" class="btn btn-primary">Marcar como terminada</button>
            </div>
        </div>
    </div>
</div>
<!---------- Finish Modal--------------->
</body>
</html>
